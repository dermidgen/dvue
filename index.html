<html>
<head>
	<title>dvue - mobile device testing for responsive layouts</title>
	<style>
		html, body { width:100%; height:100%; margin:0; padding:0; }
		body { font-family: Arial, sans-serif; font-size:1em; background-color:#111111;}
		h1 { font-size:1.5em; margin:0.3em 0;}
		h2 { font-size:1.2em; margin:0.2em 0;}
		body > header {
			margin: 0 0 1.5em 0;
			padding: 1em;
			background-color: #ededed;
		}

		form { margin:0; padding:0;}

		body > header h1, body > header h2 { 
			float:left;
			margin:0;
			line-height:30px;
			margin-right: 0.4em;
		}

		body > header .toolbar { clear:both;}
		body > header .toolbar input { width: 80%;}

		.device {
			margin: 0.5em;
			padding: 2px;
			/*position:absolute;*/
			float:left;
			-webkit-user-select: none; 
			-webkit-transform:scale(1);
			cursor:ne-resize;
			border-radius:40px;
			border-top-right-radius: 0;
			-webkit-border-top-right-radius: 0;
			background-color:transparent;
		}

		.device:hover {
			background-color: green;
		}

		.device:hover .body {
			cursor: move;
		}

		.device header .features {
			z-index:1;
		}
	
		.device header .tools {
			display:none;
			position:absolute;
			width: 80%;
			height: 60px;
			background-color: #eeeeee;
			margin: 1em 1em;
			padding: 1em;
			z-index:99;
			border-radius: 8px;
			border: 1px solid #333;
		}

		.device header:hover .tools {
			display:block;
		}

		.device header .tools .scale {
			width: 25px;
		}

		/** iPhone **/
		.device.iphone.threegs .body {
			width:386px;
			height:728px;
			border-radius: 40px;
			border: 1px solid #333;
			background-color: black;
		}
		.device.iphone.fourg .body {
			width:386px;
			height:728px;
			border-radius: 40px;
			border: 1px solid #777;
			background-color: black;
		}

		.device.iphone header {
			height: 130px;
		}

		.device.iphone header .features {
			width: 65px;
			height: 10px;
			background: black;
			border: 3px inset #ededed;
			border-radius: 40px;
			margin: auto;
			position: relative;
			top: 65px;
		}

		.device.iphone .screen {
			background-color: white;
			border-radius: 3px;
			margin: 0 auto;
			overflow:hidden;
		}

		.device.iphone.threegs .screen {
			width: 320px;
			height: 480px;
		}

		.device.iphone.fourg .screen {
			width: 320px;
			height: 480px;
		}

		.device.iphone .viewport { 
			height:100%;
			border:0;
			overflow: hidden;
		}

		.device.iphone.threegs .viewport {
			width:335px; /** screen +15 to account for scrollbars **/			
		}

		.device.iphone.fourg .viewport {
			width:335px; /** screen +15 to account for scrollbars **/			
		}

		/** iPad **/
		.device.ipad .body{
			width:820px;
			height:1100px;
			border-radius: 40px;
			border: 1px solid #333;
			background-color: black;
		}

		.device.ipad header {
			height: 30px;
		}

		.device.ipad header .features {
			display:none;
		}

		.device.ipad .screen {
			background-color: white;
			border-radius: 3px;
			margin: 0 auto;
			overflow:hidden;
			width: 768px;
			height: 1024px;
		}

		.device.ipad .viewport { 
			height:100%;
			border:0;
			overflow: hidden;
			width:783px; /** screen +15 to account for scrollbars **/			
		}

	</style>
	<script src="http://code.jquery.com/jquery-1.8.0.min.js" type="text/javascript"></script>
	<script src="http://threedubmedia.com/inc/js/jquery.event.drag-2.2.js"></script>
	<script src="http://threedubmedia.com/inc/js/jquery.event.drag.live-2.2.js"></script>
	<script src="http://threedubmedia.com/inc/js/jquery.event.drop-2.2.js"></script>
	<script src="http://threedubmedia.com/inc/js/jquery.event.drop.live-2.2.js"></script>
	<script language="javascript">

		function load(address)
		{
			$.each($('.viewport'),function(i,val){
				val.src = address;
			});
		}

		function scale(value,element)
		{
			var s = parseInt(value);
			if (s > 10) s = 10;
			if (s < 3) s = 3;
			$(element).css('-webkit-transform','scale('+s/10+')');
		}

		var resizeable = function(){
			var _lx;
			var _ly;
		};

		jQuery(function($){

			$('.device').drag('start',function(event, dd){
				if (!this._xscale) this._xscale = 1;
				if (!this._yscale) this._yscale = 1;
				dd.width = $( this ).width();
				dd.height = $( this ).height();
				dd.scale = { x:this._xscale, y:this._yscale	};
			}).drag(function(event, dd){
				dd.scale.x = (dd.width + dd.deltaX) / dd.width;
				dd.scale.y = (dd.height - dd.deltaY) / dd.height;

				/*if (dd.scale.x > 1) dd.scale.x = 1;
				if (dd.scale.y > 1) dd.scale.y = 1;
				if (dd.scale.x < 0.3) dd.scale.x = 0.3;
				if (dd.scale.y < 0.3) dd.scale.y = 0.3;*/

				var avg = (dd.scale.x + dd.scale.y) / 2;
				
				console.info(dd.scale.x, dd.scale.y);
				$(this).css('-webkit-transform','scale('+avg+','+avg+')')
			});
		});

	</script>
</head>
<body>
	<header>
		<h1>DVUE</h1>
		<h2>Mobile device testing for responsive layouts</h2>
		<div class="toolbar">
			<form action="" name="t" onsubmit="load($('#wtarget').val()); return false;">
			<label for="wtarget">Web Address:</label>
			<input type="text" id="wtarget" onblur="load(this.value);"/>
			</form>
		</div>
	</header>
	<!--
	<div class="device iphone threegs">
		<header>
			<div class="features"></div>
		</header>
		<div class="screen">
			<iframe class="viewport" scrolling="yes"></iframe>
		</div>
		<footer>
			<div class="features"></div>
		</footer>
	</div>
	-->
	<div class="device iphone fourg">
		<div class="body">
			<header>
				<div class="tools">
					<label>Scale</label>
					<input type="text" class="scale" value="10" onblur="scale(this.value, this.parentNode.parentNode.parentNode.parentNode);"/>
				</div>
				<div class="features"></div>
			</header>
			<div class="screen">
				<iframe class="viewport" scrolling="vertical"></iframe>
			</div>
			<footer>
				<div class="features"></div>
			</footer>
		</div>
	</div>
	<div class="device ipad">
		<div class="body">
			<header>
				<div class="tools">
					<label>Scale</label>
					<input type="text" class="scale" value="10" onblur="scale(this.value, this.parentNode.parentNode.parentNode.parentNode);"/>
				</div>
				<div class="features"></div>
			</header>
			<div class="screen">
				<iframe class="viewport" scrolling="vertical"></iframe>
			</div>
			<footer>
				<div class="features"></div>
			</footer>
		</div>
	</div>
</body>
</html>